<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Form - Proxy Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }

        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar h1 {
            font-size: 24px;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            font-size: 14px;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-bottom: 25px;
        }

        .card h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: transform 0.2s ease;
            margin-top: 10px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #333;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
    <!-- TrustedForm Script -->
    <script type="text/javascript">
        (function() {
            var tf = document.createElement('script');
            tf.type = 'text/javascript';
            tf.async = true;
            tf.src = 'https://api.trustedform.com/trustedform.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(tf, s);
        })();
    </script>
</head>
<body>
    <div class="navbar">
        <h1>üìã Form Submission Portal</h1>
        <div class="navbar-right">
            <div class="user-info">
                Welcome, <strong>{{ username }}</strong>
            </div>
            <button class="logout-btn" onclick="window.location.href='{{ url_for('logout') }}'">Logout</button>
        </div>
    </div>

    <div class="container">
        <a href="{{ url_for('dashboard') }}" class="back-link">‚Üê Back to Dashboard</a>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="card">
            <h2>Submit Form to Landing Page</h2>
            <div class="info-box">
                <strong>‚ÑπÔ∏è How it works:</strong> Fill out this form and submit it. Your submission will be sent to the landing page through our Decodo residential proxy, masking your IP address. The data will also be saved to Google Sheets with a TrustedForm certificate.
            </div>

            <form id="submitForm" method="POST" action="{{ url_for('submit_form') }}">
                <div class="form-row">
                    <div class="form-group">
                        <label for="state">State *</label>
                        <input type="text" id="state" name="state" placeholder="Enter state (e.g., CA, NY, TX)" required>
                    </div>
                    <div class="form-group">
                        <label for="zip_code">Zip Code *</label>
                        <input type="text" id="zip_code" name="zip_code" placeholder="Enter zip code" required pattern="[0-9]{5}" maxlength="5">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="first_name">First Name *</label>
                        <input type="text" id="first_name" name="first_name" required>
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name *</label>
                        <input type="text" id="last_name" name="last_name" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" placeholder="(555) 555-5555" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email (Optional)</label>
                        <input type="email" id="email" name="email" placeholder="email@example.com">
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label style="display: flex; align-items: flex-start; cursor: pointer;">
                        <input type="checkbox" id="disclosure" name="disclosure" required style="margin-right: 10px; margin-top: 4px; transform: scale(1.2);">
                        <span style="font-size: 14px; line-height: 1.5;">
                            This is a solicitation for insurance. By selecting the check box, you represent that you are 18+ years of age and agree to the Privacy Policy and Terms & Conditions. By selecting the above check box "you agree by your electronic signature that you give express written consent to receive marketing communications from us and our partners regarding insurance products and services including but not limited to Medicare Advantage, Medicare Supplement, and Prescription Drug plans through the use by automatic dialing system and pre-recorded calls and artificial voice messages from Low Insurance Cost at the phone number and e-mail address provided by you, including wireless numbers, if applicable, even if you have previously registered the provided number on the Do Not Call Registry. SMS/MMS and data messaging rates may apply. Your consent is not required to get a quote or purchase.
                        </span>
                    </label>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    Submit Form
                </button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('submitForm').addEventListener('submit', function(e) {
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Submitting through proxy...';
            
            // Get TrustedForm certificate if available
            if (typeof TrustedForm !== 'undefined' && TrustedForm.certUrl) {
                const tfInput = document.createElement('input');
                tfInput.type = 'hidden';
                tfInput.name = 'trustedform_cert_url';
                tfInput.value = TrustedForm.certUrl;
                this.appendChild(tfInput);
            }
        });
    </script>
</body>
</html>

